"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7001],{3905:function(e,t,a){a.d(t,{Zo:function(){return m},kt:function(){return c}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},m=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},k=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),k=s(a),c=r,u=k["".concat(p,".").concat(c)]||k[c]||d[c]||l;return a?n.createElement(u,o(o({ref:t},m),{},{components:a})):n.createElement(u,o({ref:t},m))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=k;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var s=2;s<l;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}k.displayName="MDXCreateElement"},8664:function(e,t,a){a.r(t),a.d(t,{assets:function(){return m},contentTitle:function(){return p},default:function(){return c},frontMatter:function(){return i},metadata:function(){return s},toc:function(){return d}});var n=a(7462),r=a(3366),l=(a(7294),a(3905)),o=["components"],i={sidebar_position:5},p="Shakudo API",s={unversionedId:"shakudo-platform-core/shakudoApi",id:"shakudo-platform-core/shakudoApi",title:"Shakudo API",description:"Notebook_Common",source:"@site/docs/shakudo-platform-core/shakudoApi.md",sourceDirName:"shakudo-platform-core",slug:"/shakudo-platform-core/shakudoApi",permalink:"/shakudo-platform-core/shakudoApi",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Traffic Control",permalink:"/shakudo-platform-core/adminSettings/trafficControl"},next:{title:"GraphQL",permalink:"/shakudo-platform-core/graphql"}},m={},d=[{value:"Notebook_Common",id:"notebook_common",level:2},{value:"Dask",id:"dask",level:3},{value:"<code>quickstart_dask()</code>",id:"quickstart_dask",level:3},{value:"<code>initialize_dask_cluster()</code>",id:"initialize_dask_cluster",level:3},{value:"<code>daskpool_candidates</code>",id:"daskpool_candidates",level:3},{value:"<code>get_dask_cluster()</code>",id:"get_dask_cluster",level:3},{value:"<code>cluster.close()</code> &amp; <code>client.close()</code>",id:"clusterclose--clientclose",level:3},{value:"<code>client.restart()</code>",id:"clientrestart",level:3},{value:"Pipeline Jobs",id:"pipeline-jobs",level:3},{value:"<code>submit_pipeline_job</code>",id:"submit_pipeline_job",level:3},{value:"<code>checkjobs()</code>",id:"checkjobs",level:3},{value:"<code>cancel_pipeline_jobs()</code>",id:"cancel_pipeline_jobs",level:3},{value:"GraphQL",id:"graphql",level:3},{value:"Ray_Common",id:"ray_common",level:2},{value:"Ray",id:"ray",level:3},{value:"<code>quickstart_ray()</code>",id:"quickstart_ray",level:3},{value:"<code>initialize_ray_cluster()</code>",id:"initialize_ray_cluster",level:3},{value:"<code>stop_ray_cluster()</code>",id:"stop_ray_cluster",level:3},{value:"<code>get_ray_cluster()</code>",id:"get_ray_cluster",level:3},{value:"<code>find_ray_workers</code>",id:"find_ray_workers",level:3},{value:"Utils",id:"utils",level:2},{value:"<code>get_service_url</code>",id:"get_service_url",level:3},{value:"Slack",id:"slack",level:3},{value:"<code>SlackHelper</code>",id:"slackhelper",level:3},{value:"<code>post_message</code>",id:"post_message",level:3},{value:"<code>post_table()</code>",id:"post_table",level:3},{value:"NLP models",id:"nlp-models",level:2},{value:"Extract topics and themes",id:"extract-topics-and-themes",level:3},{value:"Extract text",id:"extract-text",level:3},{value:"Save and load",id:"save-and-load",level:3},{value:"Find urls",id:"find-urls",level:3},{value:"Remove stopwords",id:"remove-stopwords",level:3},{value:"Extract text from pdfs",id:"extract-text-from-pdfs",level:3},{value:"Utils",id:"utils-1",level:2},{value:"<code>get_service_url</code>",id:"get_service_url-1",level:3},{value:"Slack",id:"slack-1",level:3},{value:"<code>SlackHelper</code>",id:"slackhelper-1",level:3},{value:"<code>post_message</code>",id:"post_message-1",level:3},{value:"<code>post_table()</code>",id:"post_table-1",level:3}],k={toc:d};function c(e){var t=e.components,a=(0,r.Z)(e,o);return(0,l.kt)("wrapper",(0,n.Z)({},k,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"shakudo-api"},"Shakudo API"),(0,l.kt)("h2",{id:"notebook_common"},"Notebook_Common"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"notebook_common")," is part of the Shakudo Platform Hyperplane API that contains convenience functions for Dask and pipeline jobs.\nIt contains functions to manage Dask clusters, pipeline jobs, and Slack messages, and GraphQL operations."),(0,l.kt)("h3",{id:"dask"},"Dask"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://dask.org/"},"Dask")," is a flexible open source distributed framework for parallel computing. It has similar APIs to NumPy and Pandas, is an ideal choice for parallelizing NumPy, Pandas and List based code."),(0,l.kt)("h3",{id:"quickstart_dask"},(0,l.kt)("inlineCode",{parentName:"h3"},"quickstart_dask()")),(0,l.kt)("p",null,"Use ",(0,l.kt)("inlineCode",{parentName:"p"},"quickstart_dask")," to quickly spin up a Dask cluster using t-shirt sizes. Returns a tuple ","[Client, KubeCluster]","."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from hyperplane.notebook_common import quickstart_dask\nclient, cluster = quickstart_dask(\n    num_workers = 4, \n    size = 'hyperplane-med-high-mem'\n)\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Parameters")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"num_workers   ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Number of workers")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"size          ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("a",{parentName:"td",href:"#worker-pools"},"Pre-configured worker pools"))))),(0,l.kt)("br",null),(0,l.kt)("a",{name:"worker-pools"}),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Pre-configured Worker pools")),(0,l.kt)("p",null,"The preconfigured worker pools are the following"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Worker Pool"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Allocatable cores"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Allocatable ram"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"hyperplane-xs-high-mem"),(0,l.kt)("td",{parentName:"tr",align:"left"},"POOL_4_32"),(0,l.kt)("td",{parentName:"tr",align:"left"},"3.5"),(0,l.kt)("td",{parentName:"tr",align:"left"},"7.0")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"hyperplane-small"),(0,l.kt)("td",{parentName:"tr",align:"left"},"POOL_8_8"),(0,l.kt)("td",{parentName:"tr",align:"left"},"7.0"),(0,l.kt)("td",{parentName:"tr",align:"left"},"5.0")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"hyperplane-small-mid-mem"),(0,l.kt)("td",{parentName:"tr",align:"left"},"POOL_8_16"),(0,l.kt)("td",{parentName:"tr",align:"left"},"7.5"),(0,l.kt)("td",{parentName:"tr",align:"left"},"12.0")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"hyperplane-small-high-mem"),(0,l.kt)("td",{parentName:"tr",align:"left"},"POOL_8_64"),(0,l.kt)("td",{parentName:"tr",align:"left"},"7.5"),(0,l.kt)("td",{parentName:"tr",align:"left"},"58.0")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"hyperplane-med"),(0,l.kt)("td",{parentName:"tr",align:"left"},"POOL_16_16"),(0,l.kt)("td",{parentName:"tr",align:"left"},"15.0"),(0,l.kt)("td",{parentName:"tr",align:"left"},"12.0")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"hyperplane-med-mid-mem"),(0,l.kt)("td",{parentName:"tr",align:"left"},"POOL_16_32"),(0,l.kt)("td",{parentName:"tr",align:"left"},"15.0"),(0,l.kt)("td",{parentName:"tr",align:"left"},"27.0")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"hyperplane-med-high-mem"),(0,l.kt)("td",{parentName:"tr",align:"left"},"POOL_16_128"),(0,l.kt)("td",{parentName:"tr",align:"left"},"15.0"),(0,l.kt)("td",{parentName:"tr",align:"left"},"110.0")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"hyperplane-large"),(0,l.kt)("td",{parentName:"tr",align:"left"},"POOL_32_32"),(0,l.kt)("td",{parentName:"tr",align:"left"},"28.0"),(0,l.kt)("td",{parentName:"tr",align:"left"},"27.0")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"hyperplane-xxl-high-mem"),(0,l.kt)("td",{parentName:"tr",align:"left"},"POOL_96_768"),(0,l.kt)("td",{parentName:"tr",align:"left"},"94.0"),(0,l.kt)("td",{parentName:"tr",align:"left"},"675.0")))),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"initialize_dask_cluster"},(0,l.kt)("inlineCode",{parentName:"h3"},"initialize_dask_cluster()")),(0,l.kt)("p",null,"Initialize a distributed DASK cluster. Returns a tuple ","[Client, KubeCluster]",". You may use the returned client and cluster like any other dask cluster."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'from hyperplane.notebook_common import initialize_dask_cluster\nclient, cluster = initialize_dask_cluster(\n    num_workers:int=2, \n    local_mode:bool=False, \n    worker_spec_yaml:str=WORKER_SPEC_TEMPLATE_1_1, \n    timeout:int=1200, \n    nthreads:int=1, \n    nprocs:int=15, ram_gb_per_proc:float=0.7, \n    cores_per_worker:int=15, \n    scheduler_deploy_mode:str="remote", \n    dashboard_port:str="random", \n    logging:str="quiet" \n  )\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Parameters ")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"num_workers"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"(Default value: 2) Number of Dask worker nodes.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"local_mode"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Whether to use local cluster or distributed KubeCluster")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"worker_spec_yaml"),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},"A string YAML for cluster configs")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"timeout"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Time limit (seconds) for a scheduler to wait to connect before returning a timeout error")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"nthreads"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Number of threads per worker in your cluster")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"nprocs"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Number of processes per worker in your cluster")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"ram_gb_per_proc"),(0,l.kt)("td",{parentName:"tr",align:"left"},"float"),(0,l.kt)("td",{parentName:"tr",align:"left"},"GB of Ram per process, per worker")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"cores_per_worker"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Number of cores per worker")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"scheduler_deploy_mode"),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Where to deploy the scheduler (remote in its own worker, or locally in jhub). Choose remote when the Dask graph")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"dashboard_port"),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},'Choose a port number for your dashboard, or leave as "random" to have a random port, which will not conflict')),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"logging"),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Logging level for printouts when initializing. Available options are ",(0,l.kt)("inlineCode",{parentName:"td"},"verbose")," or ",(0,l.kt)("inlineCode",{parentName:"td"},"quiet"),".")))),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"The number of dask workers in the cluster will be the ",(0,l.kt)("inlineCode",{parentName:"p"},"num_workers")," x ",(0,l.kt)("inlineCode",{parentName:"p"},"num_procs"),". Shakudo platform will automatically choose the closest pool from the ",(0,l.kt)("a",{parentName:"p",href:"#worker-pools"},"pre-configured node pool")," based on the combination of parameters specified. "))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Example")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from hyperplane import notebook_common as nc\nclient, cluster = nc.initialize_dask_cluster(num_workers=2)\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from hyperplane import notebook_common as nc\nclient, cluster = nc.initialize__dask_cluster(\n  num_workers=2,\n  nthreads=1,\n  nprocs=15,\n  ram_gb_per_proc=0.7,\n  cores_per_worker=15\n)\n")),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"daskpool_candidates"},(0,l.kt)("inlineCode",{parentName:"h3"},"daskpool_candidates")),(0,l.kt)("p",null,"Use ",(0,l.kt)("inlineCode",{parentName:"p"},"daskpool_candidates")," when you'd like to access the ",(0,l.kt)("a",{parentName:"p",href:"#worker-pools"},"list of available dask pools")," to choose from to spin up a Dask cluster."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"candidates = nc.daskpool_candidates\ncandidates\n")),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"get_dask_cluster"},(0,l.kt)("inlineCode",{parentName:"h3"},"get_dask_cluster()")),(0,l.kt)("p",null,"Retrieve a Dask cluster. Use this function if there's a Dask cluster that's already spun up that you would like to connect. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'from hyperplane import notebook_common as nc\nclient = nc.get_dask_cluster("dask_cluster_name")\nclient\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Parameters ")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"dask_cluster_name"),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Name of Dask cluster")))),(0,l.kt)("p",null,"To retrieve the Dask cluster name, navigate to the Ray & Dask tab on the platform and click the copy button in\nthe table column Cluster Name."),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"clusterclose--clientclose"},(0,l.kt)("inlineCode",{parentName:"h3"},"cluster.close()")," & ",(0,l.kt)("inlineCode",{parentName:"h3"},"client.close()")),(0,l.kt)("p",null,"Use ",(0,l.kt)("inlineCode",{parentName:"p"},"cluster.close()")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"client.close()")," to destroy or shut down a dask cluster after it is no longer needed to free up resources. The platform comes with an automatic garbage collection functionality - if you forget to close the cluster the platform will automatically close it after a few minutes of idle time."),(0,l.kt)("p",null,"Starting a cluster and shutting it down:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from hyperplane import notebook_common as nc\nclient, cluster = nc.initialize_dask_cluster(num_workers=2)\n\ncluster.close()\nclient.close()\n")),(0,l.kt)("p",null,"Retrieving a forgotten Dask cluster and closing it:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'from hyperplane import notebook_common as nc\nclient = nc.get_dask_cluster("dask-cluster-with-some-random-hash")\n\ncluster.close()\nclient.close()\n')),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"clientrestart"},(0,l.kt)("inlineCode",{parentName:"h3"},"client.restart()")),(0,l.kt)("p",null,"Use ",(0,l.kt)("inlineCode",{parentName:"p"},"client.restart")," whenever you want to clean up dask memory. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"\nclient.restart()\n\n")),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"Dask remembers every line of code that was run since initializing the cluster. If you'd like to edit a line of code after it's already been run once, then restart the dask client to ensure that the script runs smoothly."))),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"pipeline-jobs"},"Pipeline Jobs"),(0,l.kt)("p",null,"There are many ways pipeline jobs can be controlled: dashboard interface, GraphQL Playground, and Hyperplane API notebook_commons. You can submit, cancel, get output, and check status on jobs from your Sessions. "),(0,l.kt)("h3",{id:"submit_pipeline_job"},(0,l.kt)("inlineCode",{parentName:"h3"},"submit_pipeline_job")),(0,l.kt)("p",null,"Use this function to submit a job from your Sessions. See Create a pipeline for details on submission query fields. The function returns a job id and runID. "),(0,l.kt)("p",null,"Navigate to the Shakudo Platform Jobs tab and filter by the returned job ID if you'd like to check that the job has been successfully submitted."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from hyperplane import notebook_common as nc\nnewjob = await nc.submit_pipeline_job(\n  jobName = 'name_of_newjob',\n  pipelineYamlPath = 'yaml_path.yaml',\n  jobType = 'basic',\n  timeout = 1800,\n  active_timeout = 1800,\n  max_retries = 2,\n  parameters = {\n    \"a\":1,\n    \"b\":1\n  }\n)\nnewjob\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Parameters ")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"jobName"),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},"custom name for your job")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"pipelineYamlPath ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"(Default value: 2) Number of Dask worker nodes.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"jobType"),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Job (EC) type to use")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"timeout"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Maximum time that the pipeline may run, starting from the moment of job submission")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"active_timeout"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Maximum time that the pipeline may run once it is picked up")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"max_retries"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Number of times to retry the job if the job run has failed or timed out.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"parameters"),(0,l.kt)("td",{parentName:"tr",align:"left"},"dictionary"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Key value pairs for any parameters in your script you'd like to overwrite for this pipeline job")))),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"checkjobs"},(0,l.kt)("inlineCode",{parentName:"h3"},"checkjobs()")),(0,l.kt)("p",null,"Check status on jobs using job IDs. Returns a summary of job status and links to Dask dashboards if Dask is used."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"ids = ['a-job-id', 'another-job-id']\nres = await nc.checkjobs(ids, loop = True)\nprint(res)\n")),(0,l.kt)("p",null,"Output will look like the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"#### Jobs summary\n0 / 2 in progress\n\n0 / 2 pending\n\n2 / 2 processed\n\n2 done | 0 timed out | 0 cancelled | 0 failed\n\nProgress: 100.0%\n\n#### Dask dashboards\na-job-id done None\nanother-job-id done None\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Parameters ")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"ids ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"list"),(0,l.kt)("td",{parentName:"tr",align:"left"},"List of job IDs to check status")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"loop"),(0,l.kt)("td",{parentName:"tr",align:"left"},"boolean"),(0,l.kt)("td",{parentName:"tr",align:"left"},"(Default value: False) ",(0,l.kt)("inlineCode",{parentName:"td"},"True")," will refresh the output every 5 seconds until all jobs are processed")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"interval"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Refresh frequency for ",(0,l.kt)("inlineCode",{parentName:"td"},"loop = True"))))),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"cancel_pipeline_jobs"},(0,l.kt)("inlineCode",{parentName:"h3"},"cancel_pipeline_jobs()")),(0,l.kt)("p",null,"Use ",(0,l.kt)("inlineCode",{parentName:"p"},"cancel_pipeline_jobs()")," to cancel a pipeline job from Sessions. Returns ",(0,l.kt)("inlineCode",{parentName:"p"},"{'id': 'job-id', 'status': 'cancelled}")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"await nc.cancel_pipeline_job('job-id')\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Parameters ")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"jobID ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},"ID of pipeline job to cancel")))),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"graphql"},"GraphQL"),(0,l.kt)("p",null,"Submit a GraphQL query using ",(0,l.kt)("inlineCode",{parentName:"p"},"graphql_operations()")," function."),(0,l.kt)("p",null,"Example for submitting a job"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'gql_query = \'\'\'    \n  mutation {\n      createShakudoPipelineJob(\n          jobName: "unruffled_ardinghelli",\n          jobType: "basic",\n          timeout: 1800,\n          activeTimeout: 1800,\n          maxRetries: 2,\n          pipelineYamlPath: "yaml_path.yaml",\n          defaultCommands: true,\n          gitInit: true,\n          commitId: "",\n          branchName: "",\n          parameters: { create: [\n            { key: "a", value: "1" },\n              ]}  \n      ) {\n          id\n          jobName\n          schedule\n          parameters {\n              key\n              value\n          }\n          noGitInit\n          noHyperplaneCommands\n      }\n  }\n  \'\'\'\n  gql_queries = [gql_query]\n  results = await nc.graphql_operation(gql_queries)\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Parameters ")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"gql_queries ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Union[str, List","[str]","]"),(0,l.kt)("td",{parentName:"tr",align:"left"},"GraphQL query for relevant operation")))),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"ray_common"},"Ray_Common"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"ray_common")," is part of the Shakudo Platform Hyperplane API that contains convenience functions to manage Ray clusters. We support extensions to the basic Ray framework by supporting Ray Tune, Ray Spark, Ray with RAPIDS, and more."),(0,l.kt)("h3",{id:"ray"},"Ray"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://ray.io/"},"Ray")," is an open source project that distributed frameworks that has a more support for deep learning and reinforcement learning. It has a rich set of libraries and integrations built on a flexible distributed execution framework, is ideal choice for parallelizing model training and hyper-parameter tuning."),(0,l.kt)("h3",{id:"quickstart_ray"},(0,l.kt)("inlineCode",{parentName:"h3"},"quickstart_ray()")),(0,l.kt)("p",null,"Use ",(0,l.kt)("inlineCode",{parentName:"p"},"quickstart_ray")," to quickly spin up a Ray cluster using ",(0,l.kt)("a",{parentName:"p",href:"#worker-pools"},"t-shirt sizes")," (Sizes are the same as quick start for Dask clusters)."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from hyperplane import ray_common as rc\nray_cluster = rc.quickstart_ray(\n    num_workers = 4, \n    size = 'hyperplane-med-high-mem'\n)\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Parameters")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"num_workers   ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Number of workers")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"size          ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"object"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("a",{parentName:"td",href:"#worker-pools"},"Pre-configured worker pools"))))),(0,l.kt)("hr",null),(0,l.kt)("a",{name:"initialize-ray-cluster"}),(0,l.kt)("h3",{id:"initialize_ray_cluster"},(0,l.kt)("inlineCode",{parentName:"h3"},"initialize_ray_cluster()")),(0,l.kt)("p",null,"Initialize a distributed Ray cluster with ease and more customizability. You can also run this function to clean up the Ray nodes and re-initialize."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from hyperplane import ray_common as rc\nray_cluster = rc.initialize_ray_cluster(\n    num_workers = 4, \n    cpu_core_per_worker = 4, \n    ram_gb_per_worker = 4, \n    n_gpus = 0\n    )\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Parameters ")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"num_workers"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"(Default value: 2) Number of Ray nodes to be initialized")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"cpu_core_per_worker"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Number of CPU cores in each Ray node")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"ram_gb_per_worker"),(0,l.kt)("td",{parentName:"tr",align:"left"},"float"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Memory size in GB for each Ray node")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"n_gpus"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Number of Nvidia GPUs in each Ray node (if ",(0,l.kt)("inlineCode",{parentName:"td"},"n_gpus > 0"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"cpu_core_per_worker")," and ",(0,l.kt)("inlineCode",{parentName:"td"},"ram_gb_per_worker")," are ignored)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"use_existing"),(0,l.kt)("td",{parentName:"tr",align:"left"},"boolean"),(0,l.kt)("td",{parentName:"tr",align:"left"},"(Default: ",(0,l.kt)("inlineCode",{parentName:"td"},"use_existing = False"),") Whether to connect to/ reinitialize existing Ray cluster or spin up a new one")))),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"If you are aiming for a specific pool, ensure your ",(0,l.kt)("inlineCode",{parentName:"p"},"cpu_core_per_worker")," = the number of allocatable cores and ",(0,l.kt)("inlineCode",{parentName:"p"},"ram_gb_per_worker")," = the allocatable ram. For example, if you would like to use a POOL_16_16 worker, you may want to use the following cluster initialization."),(0,l.kt)("pre",{parentName:"div"},(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from hyperplane import ray_common as rc\nray_cluster = rc.initialize_ray_cluster(\n    num_workers = 4, \n    cpu_core_per_worker = 15, \n    ram_gb_per_worker = 12\n    )\n")))),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"stop_ray_cluster"},(0,l.kt)("inlineCode",{parentName:"h3"},"stop_ray_cluster()")),(0,l.kt)("p",null,"Use ",(0,l.kt)("inlineCode",{parentName:"p"},"stop_ray_cluster")," to shutdown a Ray cluster. After computation is finished, it's a good idea to shutdown the distributed cluster and release the resources back to the node pool. If any Ray nodes are left hanging, Shakudo Platform's garbage collection function will also automatically shutdown the Ray workers when the Session or job is finished. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from hyperplane import ray_common as rc\nrc.stop_ray_cluster(ray_cluster)\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Parameters ")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"ray_cluster ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"object"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Ray cluster to shutdown")))),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"get_ray_cluster"},(0,l.kt)("inlineCode",{parentName:"h3"},"get_ray_cluster()")),(0,l.kt)("p",null,"Reconnect to a Ray cluster by using the ",(0,l.kt)("inlineCode",{parentName:"p"},"get_ray_cluster")," to retrieve the cluster. You can use this function if you've already spun up a Ray cluster and want to connect to the same cluster (for example: in another notebook in the same session). This function will connect to an existing cluster. There are two ways to reconnect to Ray clusters.  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from hyperplane import ray_common as rc\nrc.get_ray_cluster(extra_workers = 1)\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Parameters ")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"extra_workers"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Adds nodes to your existing cluster (Default: ",(0,l.kt)("inlineCode",{parentName:"td"},"extra_workers = 0"),") The nodes that are added to the cluster will be of the same specification as the original cluster.")))),(0,l.kt)("p",null,"There are two ways to reconnect to Ray clusters. The method using the function ",(0,l.kt)("inlineCode",{parentName:"p"},"get_ray_cluster()")," is the simpler and recommended way. "),(0,l.kt)("p",null,"You can also use the ",(0,l.kt)("inlineCode",{parentName:"p"},"initialize_ray_cluster()")," to accomplish the same. Note, the arguments for ",(0,l.kt)("inlineCode",{parentName:"p"},"cpu_core_per_worker")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"ram_gb_per_worker")," must be the same as when you initialized the cluster originally."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from hyperplane import ray_common as rc\nray_cluster = rc.initialize_ray_cluster(\n    num_workers = 0, \n    cpu_core_per_worker = 15, \n    ram_gb_per_worker = 12,\n    use_existing = True\n    )\n")),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"find_ray_workers"},(0,l.kt)("inlineCode",{parentName:"h3"},"find_ray_workers")),(0,l.kt)("p",null,"Use ",(0,l.kt)("inlineCode",{parentName:"p"},"find_ray_workers()")," function to see if there are any Ray workers already spun up. Returns a list of Ray workers running."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from hyperplane import ray_common as rc\nrc.find_ray_workers()\n")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"utils"},"Utils"),(0,l.kt)("h3",{id:"get_service_url"},(0,l.kt)("inlineCode",{parentName:"h3"},"get_service_url")),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"get_service_url")," function will return the internal service URL for a running service on the platform. This is useful when another service or job uses an existing service. Using the internal service URL allows bypassing the authentication and lowers latency."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from hyperplane import utils\nimport requests\nmodel_inference_url = utils.get_service_url('model_inference_endpoint')\nrequests.get(model_inference_url)\n")),(0,l.kt)("h3",{id:"slack"},"Slack"),(0,l.kt)("p",null,"Shakudo's Hyperplane API includes a function allowing jobs to post messages to your Slack channel. You can use this to notify you of finished jobs, or even to post job results. On Shakudo there are two ways to send Slack notification messages: Use a slack token or use a webhook."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Method 1: Slack token"),"\nTo use the Slack alert integration you first need to set up a Slack token."),(0,l.kt)("p",null,"A slack token can be set up following ",(0,l.kt)("a",{parentName:"p",href:"https://api.slack.com/tutorials/tracks/getting-a-token"},"this tutorial on Slack")," by creating a quick pre-configured App. Once the App is created and installed to the workspace, the token can be found at the ",(0,l.kt)("inlineCode",{parentName:"p"},"Install App")," tab in the App's homepage. The token looks like this ",(0,l.kt)("inlineCode",{parentName:"p"},"xoxb-694301530724-2549825675367-Zn4NNP34r3c7aN3EkPDLMiNX")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Method 2: Slack Webhook URL")),(0,l.kt)("p",null,"To send messages to Slack with webhooks, first follow ",(0,l.kt)("a",{parentName:"p",href:"https://slack.com/intl/en-ca/help/articles/115005265063-Incoming-webhooks-for-Slack#set-up-incoming-webhooks"},"this tutorial on Slack")," to create a new Slack App and obtain the webhook URL like this ",(0,l.kt)("inlineCode",{parentName:"p"},"https://hooks.slack.com/services/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")),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"You can also ask the Shakudo Platform admin to add or change the WEBHOOK_URL variable in your environment permanently."))),(0,l.kt)("h3",{id:"slackhelper"},(0,l.kt)("inlineCode",{parentName:"h3"},"SlackHelper")),(0,l.kt)("p",null,"Initialize a Slack Helper object after specifying your Slack token."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Method 1: Token method")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'#Specify your Slack token\nimport os\nos.environ["SLACK_TOKEN"] = "your-slack-t0ken"\n\n#Initialize Slack Helper\nfrom hyperplane import utils\nsh = utils.SlackHelper()\n')),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"When using Method 2: Slack Webhook URL then you do not need to initialize SlackHelper. Just add the webhook URL as an environment variable."),(0,l.kt)("pre",{parentName:"div"},(0,l.kt)("code",{parentName:"pre",className:"language-python"},"import os\nos.environ['WEBHOOK_URL']='your_webhook_url'\n")))),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"post_message"},(0,l.kt)("inlineCode",{parentName:"h3"},"post_message")),(0,l.kt)("p",null,"Post a Slack Message with Slack Token."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Method 1: Token method")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from hyperplane import utils\nsh = utils.SlackHelper()\nsh.post_message('Testing!', '#some-channel')\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Method 2: Webhook method")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"#Post a message\nfrom hyperplane import utils\nutils.post_message('Testing!', '#some-channel')\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Parameters ")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"message  ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},"String of message to send (can include formatting)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"channel"),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},'(Default: "") A public channel to post the ',(0,l.kt)("inlineCode",{parentName:"td"},"message"),". If left empty, it will default to the webhook URL's default channel")))),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"post_table"},(0,l.kt)("inlineCode",{parentName:"h3"},"post_table()")),(0,l.kt)("p",null,"Post a Slack Message in table format with Slack Token."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Method 1: Token method")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'from hyperplane import utils\nsh = utils.SlackHelper()\n\nmessage_dict = {\n  "key1": "value1",\n  "key2": "value2"\n}\nsh.post_table(message_dict, channel = "alert-channel")\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Method 2: Webhook method")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'from hyperplane import utils\n\nmessage_dict = {\n  "key1": "value1",\n  "key2": "value2"\n}\nsh.post_table(message_dict, channel = "alert-channel")\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Parameters ")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"message_dict  ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"dictionary"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Dictionary of values to send in a table format")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"channel"),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},'(Default: "") A public channel to post the msg. If left empty, it will default to the webhook URL\'s default channel')))),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"nlp-models"},"NLP models"),(0,l.kt)("p",null,"Hyperplane comes with some pre-packged NLP models for common tasks. The hyperplane nlp tools can be accessed through"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from hyperplane import hyper_nlp as nlp\n")),(0,l.kt)("h3",{id:"extract-topics-and-themes"},"Extract topics and themes"),(0,l.kt)("p",null,"Find the main topics and themes with the function ",(0,l.kt)("inlineCode",{parentName:"p"},"get_topics()")," given a list of sentences, documents, or texts."),(0,l.kt)("p",null,"Returns: Topic_Model, List","[str]"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'get_topics(data:List[str], ntopic:int=10, sample_size:int=50000, method:str="USE" )\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Parameters ")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"data ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"List","[str]"),(0,l.kt)("td",{parentName:"tr",align:"left"},"A list of strings (sentences or phrases) from which you want to discover topics and themes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"ntopic"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The number of topics/themes to return")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"sample_size"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The number of samples to discover topics from")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"method"),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The method for theme extraction. Choose from ",(0,l.kt)("inlineCode",{parentName:"td"},"TFIDF"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"LDA"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"BERT"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"LDA_BERT"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"fasttext"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"USE"))))),(0,l.kt)("p",null,"Example: "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'%matplotlib inline ## use this in a notebook to display charts\n\nnlp.get_topics(["I need to buy some green and red apples.", \n                "Oranges are also useful for juices", \n                "I really like bananas and fruits", \n                "You need to clean up your car.", \n                "I am running out of out of gas"], \n               ntopic=2, \n               sample_size=50,\n               method="USE"\n              )\n')),(0,l.kt)("p",null,"The function will return the topic model and a list of top words per cluster:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"(<topic_discovery.Topic_Model at 0x7f88abc8e9a0>,\n array([['out', 'of', 'I', 'am', 'running', 'gas', 'You', 'need', 'to',\n         'clean'],\n        ['I', 'and', 'Oranges', 'are', 'also', 'useful', 'for', 'juices',\n         'need', 'to']], dtype=object))\n\n")),(0,l.kt)("h3",{id:"extract-text"},"Extract text"),(0,l.kt)("p",null,"With the function ",(0,l.kt)("inlineCode",{parentName:"p"},"extract_qa()")," when given some text, you can ask a question to extract an arbitrary field. "),(0,l.kt)("p",null,"Returns: List","[Dict]"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'from hyperplane import hyper_nlp as nlp\nnlp.get_topics(data:List[str], ntopic:int=10, sample_size:int=50000, method:str="USE" )\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Parameters ")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"text ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Context string which the answer will be extracted from")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"question",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},"A question that you want to ask based on the context")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"topk"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The number of top answers to return per question")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"return_context"),(0,l.kt)("td",{parentName:"tr",align:"left"},"boolean"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Whether or not to return context around the answer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"context_window"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"If ",(0,l.kt)("inlineCode",{parentName:"td"},"return_context")," how much of the context to return")))),(0,l.kt)("p",null,"Example: "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"text = '''\nHyperplane  is an end-to-end platform designed to take AI teams from ideation to production at breakthrough speeds. We built Hyperplane because we needed a powerful platform for our scientists to design, develop, deploy and maintain their own work in production.\n\nWhy Us?\n\nThe Shakudo team grew out of advanced AI organizations across the industry. After having seen, tried and used every product out there, we came to the conclusion that there is a gap to be filled, and Hyperplane was born.\n\nWhat does this mean for you?\n\nIf you are scaling up an AI organization, starting up an AI-powered product, or looking to get your existing solutions faster and more reliably to production, Hyperplane may be for you.\n'''\n\nquestions = [\n    \"What does Hyperplane do?\"\n]\n\nnlp.extract_qa(text, questions[0])\n")),(0,l.kt)("p",null,"This will return: "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"[{'score': 0.04723832756280899,\n  'start': 51,\n  'end': 115,\n  'answer': 'take AI teams from ideation to production at breakthrough speeds'}]\n")),(0,l.kt)("h3",{id:"save-and-load"},"Save and load"),(0,l.kt)("p",null,"To save serializable models, you can use the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'nlp.save_model(model=tm, filename="tm_model")\n')),(0,l.kt)("p",null,"where ",(0,l.kt)("inlineCode",{parentName:"p"},"tm")," is a serializable object. "),(0,l.kt)("p",null,"To load an existing model saved with hyper_nlp, use the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"loaded_model = nlp.load_model(filename='tm_model')\n")),(0,l.kt)("h3",{id:"find-urls"},"Find urls"),(0,l.kt)("p",null,"Use the function ",(0,l.kt)("inlineCode",{parentName:"p"},"find_urls()")," to look for strings that are urls"),(0,l.kt)("p",null,"Returns: List","[str]"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"nlp.find_urls(s:str)\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Parameters")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"s ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},"A string from which you would like to search for urls")))),(0,l.kt)("h3",{id:"remove-stopwords"},"Remove stopwords"),(0,l.kt)("p",null,"Use the function ",(0,l.kt)("inlineCode",{parentName:"p"},"clean_text()")," to remove stopwords from a string of text."),(0,l.kt)("p",null,"Returns a string with stopwords removed."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"nlp.clean_text(s:str, remove_list:List[str]=en_stop_words)\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Parameters")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"s ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},"A string which you would like to clean by removing stopwords")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"remove_list"),(0,l.kt)("td",{parentName:"tr",align:"left"},"List","[str]"),(0,l.kt)("td",{parentName:"tr",align:"left"},"A list of strings to include as stopwords to remove")))),(0,l.kt)("h3",{id:"extract-text-from-pdfs"},"Extract text from pdfs"),(0,l.kt)("p",null,"Use ",(0,l.kt)("inlineCode",{parentName:"p"},"extract_digital_pdf()")," function to extract text from pdfs."),(0,l.kt)("p",null,"Returns a string of text."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"extract_digital_pdf(filepath:str, auto_clean_threshold:int=0)\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Parameters")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"filepath ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},"A filepath location for the digital pdf to extract")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"auto_clean_threshold"),(0,l.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"A threshold for removing words that are too short. Keep at 0 to keep all words that are not stopwords. Use any other positive integer to remove words containing fewer than auto_clean_threshold number of letters.")))),(0,l.kt)("h2",{id:"utils-1"},"Utils"),(0,l.kt)("h3",{id:"get_service_url-1"},(0,l.kt)("inlineCode",{parentName:"h3"},"get_service_url")),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"get_service_url")," function will return the internal service URL for a running service on the platform. This is useful when another service or job uses an existing service. Using the internal service URL allows bypassing the authentication and lowers latency."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from hyperplane import utils\nimport requests\nmodel_inference_url = utils.get_service_url('model_inference_endpoint')\nrequests.get(model_inference_url)\n")),(0,l.kt)("h3",{id:"slack-1"},"Slack"),(0,l.kt)("p",null,"Shakudo's Hyperplane API includes a function allowing jobs to post messages to your Slack channel. You can use this to notify you of finished jobs, or even to post job results. On Shakudo there are two ways to send Slack notification messages: Use a slack token or use a webhook."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Method 1: Slack token"),"\nTo use the Slack alert integration you first need to set up a Slack token."),(0,l.kt)("p",null,"A slack token can be set up following ",(0,l.kt)("a",{parentName:"p",href:"https://api.slack.com/tutorials/tracks/getting-a-token"},"this tutorial on Slack")," by creating a quick pre-configured App. Once the App is created and installed to the workspace, the token can be found at the ",(0,l.kt)("inlineCode",{parentName:"p"},"Install App")," tab in the App's homepage. The token looks like this ",(0,l.kt)("inlineCode",{parentName:"p"},"xoxb-694301530724-2549825675367-Zn4NNP34r3c7aN3EkPDLMiNX")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Method 2: Slack Webhook URL")),(0,l.kt)("p",null,"To send messages to Slack with webhooks, first follow ",(0,l.kt)("a",{parentName:"p",href:"https://slack.com/intl/en-ca/help/articles/115005265063-Incoming-webhooks-for-Slack#set-up-incoming-webhooks"},"this tutorial on Slack")," to create a new Slack App and obtain the webhook URL like this ",(0,l.kt)("inlineCode",{parentName:"p"},"https://hooks.slack.com/services/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")),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"You can also ask the Shakudo Platform admin to add or change the WEBHOOK_URL variable in your environment permanently."))),(0,l.kt)("h3",{id:"slackhelper-1"},(0,l.kt)("inlineCode",{parentName:"h3"},"SlackHelper")),(0,l.kt)("p",null,"Initialize a Slack Helper object after specifying your Slack token."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Method 1: Token method")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'#Specify your Slack token\nimport os\nos.environ["SLACK_TOKEN"] = "your-slack-t0ken"\n\n#Initialize Slack Helper\nfrom hyperplane import utils\nsh = utils.SlackHelper()\n')),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"When using Method 2: Slack Webhook URL then you do not need to initialize SlackHelper. Just add the webhook URL as an environment variable."),(0,l.kt)("pre",{parentName:"div"},(0,l.kt)("code",{parentName:"pre",className:"language-python"},"import os\nos.environ['WEBHOOK_URL']='your_webhook_url'\n")))),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"post_message-1"},(0,l.kt)("inlineCode",{parentName:"h3"},"post_message")),(0,l.kt)("p",null,"Post a Slack Message with Slack Token."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Method 1: Token method")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from hyperplane import utils\nsh = utils.SlackHelper()\nsh.post_message('Testing!', '#some-channel')\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Method 2: Webhook method")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"#Post a message\nfrom hyperplane import utils\nutils.post_message('Testing!', '#some-channel')\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Parameters ")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"message  ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},"String of message to send (can include formatting)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"channel"),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},'(Default: "") A public channel to post the ',(0,l.kt)("inlineCode",{parentName:"td"},"message"),". If left empty, it will default to the webhook URL's default channel")))),(0,l.kt)("hr",null),(0,l.kt)("h3",{id:"post_table-1"},(0,l.kt)("inlineCode",{parentName:"h3"},"post_table()")),(0,l.kt)("p",null,"Post a Slack Message in table format with Slack Token."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Method 1: Token method")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'from hyperplane import utils\nsh = utils.SlackHelper()\n\nmessage_dict = {\n  "key1": "value1",\n  "key2": "value2"\n}\nsh.post_table(message_dict, channel = "alert-channel")\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Method 2: Webhook method")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'from hyperplane import utils\n\nmessage_dict = {\n  "key1": "value1",\n  "key2": "value2"\n}\nsh.post_table(message_dict, channel = "alert-channel")\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Parameters ")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"message_dict  ",(0,l.kt)("div",{class:"label basic required"},"Required")),(0,l.kt)("td",{parentName:"tr",align:"left"},"dictionary"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Dictionary of values to send in a table format")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"channel"),(0,l.kt)("td",{parentName:"tr",align:"left"},"string"),(0,l.kt)("td",{parentName:"tr",align:"left"},'(Default: "") A public channel to post the msg. If left empty, it will default to the webhook URL\'s default channel')))))}c.isMDXComponent=!0}}]);