"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2632],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return d}});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=c(a),d=l,k=m["".concat(s,".").concat(d)]||m[d]||u[d]||i;return a?n.createElement(k,r(r({ref:t},p),{},{components:a})):n.createElement(k,r({ref:t},p))}));function d(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var i=a.length,r=new Array(i);r[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:l,r[1]=o;for(var c=2;c<i;c++)r[c]=a[c];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},9725:function(e,t,a){a.r(t),a.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return o},metadata:function(){return c},toc:function(){return u}});var n=a(7462),l=a(3366),i=(a(7294),a(3905)),r=["components"],o={},s="Outbound Traffic Access",c={unversionedId:"developer-docs/features/outbound-traffic-access",id:"developer-docs/features/outbound-traffic-access",title:"Outbound Traffic Access",description:"Overview",source:"@site/docs/developer-docs/features/outbound-traffic-access.md",sourceDirName:"developer-docs/features",slug:"/developer-docs/features/outbound-traffic-access",permalink:"/developer-docs/features/outbound-traffic-access",draft:!1,tags:[],version:"current",lastUpdatedBy:"chyuen-devsentient",lastUpdatedAt:1760986571,formattedLastUpdatedAt:"10/20/2025",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Immediate Jobs",permalink:"/developer-docs/features/jobs"},next:{title:"Persistent Volumes",permalink:"/developer-docs/features/persistent-volumes"}},p={},u=[{value:"Overview",id:"overview",level:2},{value:"Access &amp; Location",id:"access--location",level:2},{value:"Key Capabilities",id:"key-capabilities",level:2},{value:"Cluster-Wide Air Gap Mode",id:"cluster-wide-air-gap-mode",level:3},{value:"Per-Namespace Traffic Control",id:"per-namespace-traffic-control",level:3},{value:"Host Whitelisting",id:"host-whitelisting",level:3},{value:"User Interface",id:"user-interface",level:2},{value:"Main View",id:"main-view",level:3},{value:"Dialogs &amp; Modals",id:"dialogs--modals",level:3},{value:"Tables &amp; Data Grids",id:"tables--data-grids",level:3},{value:"Technical Details",id:"technical-details",level:2},{value:"GraphQL Operations",id:"graphql-operations",level:3},{value:"Component Structure",id:"component-structure",level:3},{value:"State Management",id:"state-management",level:3},{value:"Common Workflows",id:"common-workflows",level:2},{value:"Enable Air Gap Mode for Maximum Security",id:"enable-air-gap-mode-for-maximum-security",level:3},{value:"Configure Namespace for Partial Access",id:"configure-namespace-for-partial-access",level:3},{value:"Block All Traffic from a Namespace",id:"block-all-traffic-from-a-namespace",level:3},{value:"Restore Full Access to a Namespace",id:"restore-full-access-to-a-namespace",level:3},{value:"Related Features",id:"related-features",level:2},{value:"Notes &amp; Tips",id:"notes--tips",level:2},{value:"Important Considerations",id:"important-considerations",level:3},{value:"Best Practices",id:"best-practices",level:3},{value:"Troubleshooting",id:"troubleshooting",level:3}],m={toc:u};function d(e){var t=e.components,a=(0,l.Z)(e,r);return(0,i.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"outbound-traffic-access"},"Outbound Traffic Access"),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"The Outbound Traffic Access panel provides granular control over network egress (outbound traffic) from Kubernetes namespaces in the Shakudo cluster. This feature enables administrators to implement security policies by restricting which external hosts and services workloads can access, including a cluster-wide Air Gap Mode for complete network isolation."),(0,i.kt)("h2",{id:"access--location"},"Access & Location"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Route"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"?panel=outbound-traffic-access")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Navigation"),": Network \u2192 Outbound Traffic Access"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Access Requirements"),": dashboard-admin"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Feature Flags"),": None")),(0,i.kt)("h2",{id:"key-capabilities"},"Key Capabilities"),(0,i.kt)("h3",{id:"cluster-wide-air-gap-mode"},"Cluster-Wide Air Gap Mode"),(0,i.kt)("p",null,"Enable or disable Air Gap Mode across the entire cluster. When enabled, all namespaces are completely isolated from external networks, blocking all outbound traffic. This provides maximum security for sensitive environments but prevents access to external APIs, package repositories, and other internet resources."),(0,i.kt)("h3",{id:"per-namespace-traffic-control"},"Per-Namespace Traffic Control"),(0,i.kt)("p",null,"Configure outbound traffic policies for individual namespaces with three granular access levels:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Full Access"),": Allow all outbound traffic from the namespace"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"No Access"),": Block all outbound traffic (complete isolation)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Partial Access"),": Allow traffic only to specific whitelisted hosts")),(0,i.kt)("h3",{id:"host-whitelisting"},"Host Whitelisting"),(0,i.kt)("p",null,"Define specific external hosts that workloads in a namespace can access. Supports domain patterns including wildcards (e.g., ",(0,i.kt)("inlineCode",{parentName:"p"},"*.example.com"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"api.service.com"),")."),(0,i.kt)("h2",{id:"user-interface"},"User Interface"),(0,i.kt)("h3",{id:"main-view"},"Main View"),(0,i.kt)("p",null,"The panel displays a grid of namespace cards, with each card showing:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Namespace name"),(0,i.kt)("li",{parentName:"ul"},"Current access status (indicated by shield icon):",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Green shield (solid)"),": Namespace has no outbound access and is protected"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Green shield (outlined)"),": Namespace has partial access (specific hosts whitelisted)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"No icon"),": Namespace has full outbound access"))),(0,i.kt)("li",{parentName:"ul"},"Settings button to configure namespace-specific policies")),(0,i.kt)("p",null,"The view includes:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Air Gap Mode toggle")," (top right): Global switch to enable/disable cluster-wide traffic blocking"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Search field"),": Filter namespaces by name"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Backdrop overlay"),": When Air Gap Mode is enabled or updating, an informational overlay appears over all namespace cards")),(0,i.kt)("h3",{id:"dialogs--modals"},"Dialogs & Modals"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Air Gap Mode Confirmation Dialog")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Purpose: Confirm enabling or disabling cluster-wide Air Gap Mode"),(0,i.kt)("li",{parentName:"ul"},"Actions: Confirm or Cancel"),(0,i.kt)("li",{parentName:"ul"},"Warning: Explains that enabling blocks all outbound traffic, disabling restores access"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Namespace Settings Dialog")),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Purpose: Configure outbound traffic policy for a specific namespace"),(0,i.kt)("li",{parentName:"ul"},"Fields:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Three access level options (radio buttons):",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Full Access"),": Allow all outbound traffic"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"No Access"),": Allow no outbound traffic"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Partial Access"),": Allow only some hosts"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Host(s) field"),": Comma-separated list of allowed hosts (visible only when Partial Access is selected)"))),(0,i.kt)("li",{parentName:"ul"},"Actions: Save or Close"),(0,i.kt)("li",{parentName:"ul"},"Validation: Hosts must match the pattern ",(0,i.kt)("inlineCode",{parentName:"li"},"*.domain.com")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"subdomain.domain.com"))))),(0,i.kt)("h3",{id:"tables--data-grids"},"Tables & Data Grids"),(0,i.kt)("p",null,"The panel uses a responsive grid layout (not a table) to display namespace cards:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Grid adapts to screen size: 6 columns (xs), 4 columns (sm), 2 columns (md)"),(0,i.kt)("li",{parentName:"ul"},"Each card is clickable to open settings"),(0,i.kt)("li",{parentName:"ul"},"Cards are disabled when Air Gap Mode is active")),(0,i.kt)("h2",{id:"technical-details"},"Technical Details"),(0,i.kt)("h3",{id:"graphql-operations"},"GraphQL Operations"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Queries:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"getNamespaces")," - Retrieves all user-accessible namespaces (excludes system namespaces like istio-system, kube-system, hyperplane-core, etc.)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"isAirGapModeOn")," - Checks if cluster-wide Air Gap Mode is currently enabled"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"namespace($namespace)")," - Fetches outbound egress control details for a specific namespace, including:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"allowGlobalOutboundAccess"),": Boolean indicating if namespace has full access"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"allowedHosts"),": Array of whitelisted host patterns"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"outboundTrafficPolicyActive"),": Boolean indicating if traffic policy is active")))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Mutations:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"toggleAirGapMode($enable)")," - Enables or disables cluster-wide Air Gap Mode"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"enableNamespaceBlanketAccess($namespace)")," - Grants full outbound access to a namespace"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"disableNamespaceBlanketAccess($namespace)")," - Removes all outbound access from a namespace"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"setNamespaceAllowedHosts($namespace, $hosts)")," - Sets specific whitelisted hosts for a namespace")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Subscriptions:"),"\nNone"),(0,i.kt)("h3",{id:"component-structure"},"Component Structure"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Main Component: ",(0,i.kt)("inlineCode",{parentName:"li"},"components/TrafficControl/Panel.tsx")),(0,i.kt)("li",{parentName:"ul"},"Namespace Grid: ",(0,i.kt)("inlineCode",{parentName:"li"},"components/TrafficControl/Namespaces.tsx")),(0,i.kt)("li",{parentName:"ul"},"Namespace Card: ",(0,i.kt)("inlineCode",{parentName:"li"},"components/TrafficControl/Card.tsx")),(0,i.kt)("li",{parentName:"ul"},"Air Gap Mode Toggle: ",(0,i.kt)("inlineCode",{parentName:"li"},"components/TrafficControl/AirGapModeSwitch.tsx")),(0,i.kt)("li",{parentName:"ul"},"Settings Dialog: ",(0,i.kt)("inlineCode",{parentName:"li"},"components/TrafficControl/NamespaceSettings.tsx"))),(0,i.kt)("h3",{id:"state-management"},"State Management"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Uses Jotai atoms for global state:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"AirGapModeOnAtom"),": Tracks whether Air Gap Mode is enabled"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"AirGapModeUpdatingAtom"),": Tracks whether Air Gap Mode is currently updating"))),(0,i.kt)("li",{parentName:"ul"},"Apollo Client for GraphQL data fetching and caching"),(0,i.kt)("li",{parentName:"ul"},"Local component state for dialog open/close and form inputs")),(0,i.kt)("h2",{id:"common-workflows"},"Common Workflows"),(0,i.kt)("h3",{id:"enable-air-gap-mode-for-maximum-security"},"Enable Air Gap Mode for Maximum Security"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Navigate to Network \u2192 Outbound Traffic Access"),(0,i.kt)("li",{parentName:"ol"},'Click the "Air Gap Mode" toggle switch in the top right'),(0,i.kt)("li",{parentName:"ol"},"Review the confirmation dialog warning about blocking all outbound traffic"),(0,i.kt)("li",{parentName:"ol"},'Click "Confirm" to enable'),(0,i.kt)("li",{parentName:"ol"},"Wait for the update to complete (backdrop overlay will show progress)"),(0,i.kt)("li",{parentName:"ol"},"All namespace cards will be disabled and overlaid with Air Gap Mode message")),(0,i.kt)("h3",{id:"configure-namespace-for-partial-access"},"Configure Namespace for Partial Access"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Locate the target namespace card in the grid (use search if needed)"),(0,i.kt)("li",{parentName:"ol"},'Click the "Settings" button on the namespace card'),(0,i.kt)("li",{parentName:"ol"},'In the dialog, select "Partial Access"'),(0,i.kt)("li",{parentName:"ol"},"Enter comma-separated host patterns in the hosts field (e.g., ",(0,i.kt)("inlineCode",{parentName:"li"},"api.github.com, *.npmjs.org"),")"),(0,i.kt)("li",{parentName:"ol"},'Click "Save"'),(0,i.kt)("li",{parentName:"ol"},"The namespace card will display a green outlined shield icon indicating partial access")),(0,i.kt)("h3",{id:"block-all-traffic-from-a-namespace"},"Block All Traffic from a Namespace"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},'Find the namespace card and click "Settings"'),(0,i.kt)("li",{parentName:"ol"},'Select "No Access" option'),(0,i.kt)("li",{parentName:"ol"},'Click "Save"'),(0,i.kt)("li",{parentName:"ol"},"The namespace card will display a solid green shield icon indicating it's protected")),(0,i.kt)("h3",{id:"restore-full-access-to-a-namespace"},"Restore Full Access to a Namespace"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Open the namespace's Settings dialog"),(0,i.kt)("li",{parentName:"ol"},'Select "Full Access" option'),(0,i.kt)("li",{parentName:"ol"},'Click "Save"'),(0,i.kt)("li",{parentName:"ol"},"The shield icon will disappear, indicating unrestricted access")),(0,i.kt)("h2",{id:"related-features"},"Related Features"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/developer-docs/features/stack-components"},"Stack Components Panel")," - Components deployed in namespaces are affected by traffic policies"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/developer-docs/features/sessions"},"Sessions Panel")," - Development environments run in namespaces and may need external access"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/developer-docs/features/jobs"},"Jobs Panel")," - Pipeline jobs run in namespaces and may require access to external data sources")),(0,i.kt)("h2",{id:"notes--tips"},"Notes & Tips"),(0,i.kt)("h3",{id:"important-considerations"},"Important Considerations"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Air Gap Mode overrides all namespace settings"),": When enabled, even namespaces configured for full access will be blocked"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"System namespaces are excluded"),": Core infrastructure namespaces (istio-system, kube-system, hyperplane-core, etc.) are not shown or affected by these controls"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Changes take effect immediately"),": There is no grace period when enabling restrictions"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Validation is strict"),": Host patterns must be valid domains with optional wildcard prefixes (e.g., ",(0,i.kt)("inlineCode",{parentName:"li"},"*.example.com")," is valid, ",(0,i.kt)("inlineCode",{parentName:"li"},"example.*")," is not)")),(0,i.kt)("h3",{id:"best-practices"},"Best Practices"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Start with least privilege"),": Configure namespaces with No Access by default, then add specific hosts as needed"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Use wildcards carefully"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"*.domain.com")," allows access to all subdomains, which may be broader than needed"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Test before production"),": Enable Air Gap Mode in a test environment first to identify external dependencies"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Document exceptions"),": Keep a record of which namespaces need external access and why"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Regular audits"),": Periodically review namespace access settings to remove unnecessary permissions")),(0,i.kt)("h3",{id:"troubleshooting"},"Troubleshooting"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Workloads failing after enabling restrictions"),": Check logs for connection errors, then add required hosts to the allowed list"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Unable to save settings"),": Ensure host patterns are valid domain names (no IP addresses, must include TLD)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Changes not taking effect"),": Air Gap Mode may be enabled at the cluster level, blocking all traffic regardless of namespace settings"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Settings button disabled"),": Air Gap Mode is currently enabled or updating; wait for it to complete or disable Air Gap Mode first")))}d.isMDXComponent=!0}}]);