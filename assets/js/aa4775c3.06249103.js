"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9516],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return d}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),m=c(n),d=a,y=m["".concat(l,".").concat(d)]||m[d]||p[d]||o;return n?r.createElement(y,s(s({ref:t},u),{},{components:n})):r.createElement(y,s({ref:t},u))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,s=new Array(o);s[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:a,s[1]=i;for(var c=2;c<o;c++)s[c]=n[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3555:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return i},metadata:function(){return c},toc:function(){return p}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),s=["components"],i={sidebar_position:10},l="Custom YAML Examples",c={unversionedId:"tutorials/custom-yaml-examples",id:"tutorials/custom-yaml-examples",title:"Custom YAML Examples",description:"Learn how to modify your Job or Microservice Pod YAML to add small but powerful changes that may or may not already be supported in the Shakudo UI. This is the ultimate customization path for users familiar with Kubernetes Pods, containers, and specs.",source:"@site/docs/tutorials/custom-yaml-examples.md",sourceDirName:"tutorials",slug:"/tutorials/custom-yaml-examples",permalink:"/tutorials/custom-yaml-examples",draft:!1,tags:[],version:"current",lastUpdatedBy:"yevgeniy-ds",lastUpdatedAt:1760388706,formattedLastUpdatedAt:"10/13/2025",sidebarPosition:10,frontMatter:{sidebar_position:10},sidebar:"tutorialSidebar",previous:{title:"Create a Flask App",permalink:"/tutorials/flaskapp"},next:{title:"Confluence Q&A App on Shakudo with Langchain and ChatGPT",permalink:"/tutorials/confluenceapp"}},u={},p=[{value:"Add a Liveness Probe",id:"add-a-liveness-probe",level:2},{value:"Add a Shakudo Secret to a Job or Service",id:"add-a-shakudo-secret-to-a-job-or-service",level:2}],m={toc:p};function d(e){var t=e.components,n=(0,a.Z)(e,s);return(0,o.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"custom-yaml-examples"},"Custom YAML Examples"),(0,o.kt)("p",null,"Learn how to modify your Job or Microservice Pod YAML to add small but powerful changes that may or may not already be supported in the Shakudo UI. This is the ultimate customization path for users familiar with Kubernetes Pods, containers, and specs."),(0,o.kt)("p",null,"Note: If a feature exists in the frontend, prefer that path first. Use Custom YAML for advanced overrides where you need full control."),(0,o.kt)("h2",{id:"add-a-liveness-probe"},"Add a Liveness Probe"),(0,o.kt)("p",null,"Use a liveness probe to automatically restart your container if it becomes unhealthy. You can add probes directly under your container spec in the Custom YAML panel. See additional background in the ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"/shakudo-platform-core/service#liveness-and-readiness-probes"},"Service docs - Health Probes")),"."),(0,o.kt)("p",null,"Example (HTTP GET to /health):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"spec:\n  template:\n    spec:\n      containers:\n        - name: your-container\n          ports:\n            - containerPort: 8787\n          livenessProbe:\n            httpGet:\n              path: /health\n              port: 8787\n            initialDelaySeconds: 30\n            periodSeconds: 10\n            timeoutSeconds: 5\n            failureThreshold: 3\n")),(0,o.kt)("p",null,"Example (simple TCP socket on the exposed port):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"spec:\n  template:\n    spec:\n      containers:\n        - name: your-container\n          ports:\n            - containerPort: 8787\n          livenessProbe:\n            tcpSocket:\n              port: 8787\n            initialDelaySeconds: 30\n            periodSeconds: 10\n            timeoutSeconds: 5\n            failureThreshold: 3\n")),(0,o.kt)("h2",{id:"add-a-shakudo-secret-to-a-job-or-service"},"Add a Shakudo Secret to a Job or Service"),(0,o.kt)("p",null,"Shakudo Secrets let you pass sensitive data securely to workloads. Start by creating a Secret in the dashboard (see the ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"/shakudo-platform-core/adminSettings/secrets"},"Secrets docs"))," for details and naming guidance)."),(0,o.kt)("p",null,"When attached via the Shakudo UI, secrets are injected automatically as:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Environment variables: ",(0,o.kt)("inlineCode",{parentName:"li"},"HYPERPLANE_CUSTOM_SECRET_KEY_{KEY}")),(0,o.kt)("li",{parentName:"ul"},"Files: ",(0,o.kt)("inlineCode",{parentName:"li"},"/etc/hyperplane/secrets/{secret_name}/{secret_key}"))),(0,o.kt)("p",null,'If you prefer to wire a Kubernetes Secret explicitly in Custom YAML, start by filling in as much of the Jobs or Microservices creation form as you need, then click the "Customize Pod YAML" button and use one of the patterns below (the Secret must already exist in the same namespace as the workload):'),(0,o.kt)("p",null,"Option A \u2014 reference a single key as an environment variable:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"spec:\n  template:\n    spec:\n      containers:\n        - name: your-container\n          env:\n            - name: API_KEY\n              valueFrom:\n                secretKeyRef:\n                  name: my-secret         # Shakudo Secret name\n                  key: api-key            # key inside the secret\n")),(0,o.kt)("p",null,"Option B \u2014 mount the whole secret as files and read from the mount path:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"spec:\n  template:\n    spec:\n      containers:\n        - name: your-container\n          volumeMounts:\n            - name: my-secret-vol\n              mountPath: /etc/hyperplane/secrets/my-secret\n              readOnly: true\n      volumes:\n        - name: my-secret-vol\n          secret:\n            secretName: my-secret\n")),(0,o.kt)("p",null,"Tip: With Shakudo-attached Secrets, your code can also read files directly from ",(0,o.kt)("inlineCode",{parentName:"p"},"/etc/hyperplane/secrets/{secret_name}/{secret_key}")," or use the auto-injected env var ",(0,o.kt)("inlineCode",{parentName:"p"},"HYPERPLANE_CUSTOM_SECRET_KEY_{UPPERCASE_KEY}"),"."),(0,o.kt)("hr",null),(0,o.kt)("p",null,"More examples coming soon!"))}d.isMDXComponent=!0}}]);